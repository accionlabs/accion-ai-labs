<svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#EF4444" />
    </marker>
    <marker id="arrow-gray" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#9CA3AF" />
    </marker>
  </defs>

  <!-- Title -->
  <text font-family="Inter, system-ui, sans-serif" x="400" y="30" text-anchor="middle" font-size="16" font-weight="600" fill="#111827">
    Architecture Violation Detection
  </text>

  <!-- Layers -->
  <g id="layers">
    <!-- UI Layer -->
    <rect x="50" y="60" width="700" height="80" rx="8" fill="#E0E7FF" stroke="#6366F1" stroke-width="2" />
    <text font-family="Inter, system-ui, sans-serif" x="70" y="85" font-size="12" font-weight="600" fill="#4338CA">UI Layer</text>
    
    <!-- UI Components -->
    <rect x="100" y="90" width="120" height="35" rx="4" fill="#FFFFFF" stroke="#6366F1" />
    <text font-family="Inter, system-ui, sans-serif" x="160" y="112" text-anchor="middle" font-size="11" fill="#4338CA">CustomerListView</text>
    
    <rect x="250" y="90" width="120" height="35" rx="4" fill="#FFFFFF" stroke="#6366F1" />
    <text font-family="Inter, system-ui, sans-serif" x="310" y="112" text-anchor="middle" font-size="11" fill="#4338CA">OrderForm</text>
    
    <rect x="400" y="90" width="120" height="35" rx="4" fill="#FFFFFF" stroke="#6366F1" />
    <text font-family="Inter, system-ui, sans-serif" x="460" y="112" text-anchor="middle" font-size="11" fill="#4338CA">Dashboard</text>
    
    <rect x="550" y="90" width="120" height="35" rx="4" fill="#FFFFFF" stroke="#6366F1" />
    <text font-family="Inter, system-ui, sans-serif" x="610" y="112" text-anchor="middle" font-size="11" fill="#4338CA">Analytics</text>

    <!-- Service Layer -->
    <rect x="50" y="170" width="700" height="80" rx="8" fill="#DCFCE7" stroke="#22C55E" stroke-width="2" />
    <text font-family="Inter, system-ui, sans-serif" x="70" y="195" font-size="12" font-weight="600" fill="#16A34A">Service Layer</text>
    
    <!-- Services -->
    <rect x="100" y="200" width="120" height="35" rx="4" fill="#FFFFFF" stroke="#22C55E" />
    <text font-family="Inter, system-ui, sans-serif" x="160" y="222" text-anchor="middle" font-size="11" fill="#16A34A">CustomerService</text>
    
    <rect x="250" y="200" width="120" height="35" rx="4" fill="#FFFFFF" stroke="#22C55E" />
    <text font-family="Inter, system-ui, sans-serif" x="310" y="222" text-anchor="middle" font-size="11" fill="#16A34A">OrderService</text>
    
    <rect x="400" y="200" width="120" height="35" rx="4" fill="#FFFFFF" stroke="#22C55E" />
    <text font-family="Inter, system-ui, sans-serif" x="460" y="222" text-anchor="middle" font-size="11" fill="#16A34A">AuthService</text>
    
    <rect x="550" y="200" width="120" height="35" rx="4" fill="#FFFFFF" stroke="#22C55E" />
    <text font-family="Inter, system-ui, sans-serif" x="610" y="222" text-anchor="middle" font-size="11" fill="#16A34A">AnalyticsService</text>

    <!-- Data Layer -->
    <rect x="50" y="280" width="700" height="80" rx="8" fill="#FEF3C7" stroke="#F59E0B" stroke-width="2" />
    <text font-family="Inter, system-ui, sans-serif" x="70" y="305" font-size="12" font-weight="600" fill="#D97706">Data Layer</text>
    
    <!-- Databases -->
    <rect x="200" y="310" width="120" height="35" rx="4" fill="#FFFFFF" stroke="#F59E0B" />
    <text font-family="Inter, system-ui, sans-serif" x="260" y="332" text-anchor="middle" font-size="11" fill="#D97706">CustomerDB</text>
    
    <rect x="350" y="310" width="120" height="35" rx="4" fill="#FFFFFF" stroke="#F59E0B" />
    <text font-family="Inter, system-ui, sans-serif" x="410" y="332" text-anchor="middle" font-size="11" fill="#D97706">SharedDB</text>
    
    <rect x="500" y="310" width="120" height="35" rx="4" fill="#FFFFFF" stroke="#F59E0B" />
    <text font-family="Inter, system-ui, sans-serif" x="560" y="332" text-anchor="middle" font-size="11" fill="#D97706">AnalyticsDB</text>
  </g>

  <!-- Proper Dependencies (gray) -->
  <g id="proper-deps">
    <!-- UI to Service -->
    <path d="M 310 125 L 310 200" stroke="#9CA3AF" stroke-width="1" fill="none" marker-end="url(#arrow-gray)" />
    <path d="M 460 125 L 460 200" stroke="#9CA3AF" stroke-width="1" fill="none" marker-end="url(#arrow-gray)" />
    <path d="M 610 125 L 610 200" stroke="#9CA3AF" stroke-width="1" fill="none" marker-end="url(#arrow-gray)" />
    
    <!-- Service to Data -->
    <path d="M 310 235 L 410 310" stroke="#9CA3AF" stroke-width="1" fill="none" marker-end="url(#arrow-gray)" />
    <path d="M 460 235 L 410 310" stroke="#9CA3AF" stroke-width="1" fill="none" marker-end="url(#arrow-gray)" />
    <path d="M 610 235 L 560 310" stroke="#9CA3AF" stroke-width="1" fill="none" marker-end="url(#arrow-gray)" />
  </g>

  <!-- Violations (red) -->
  <g id="violations">
    <!-- Cross-layer violation: UI direct to DB -->
    <path d="M 160 125 L 260 310" stroke="#EF4444" stroke-width="3" fill="none" marker-end="url(#arrow)" stroke-dasharray="5,5" />
    
    <!-- Circular dependency -->
    <path d="M 220 217 L 250 217" stroke="#EF4444" stroke-width="2" fill="none" marker-end="url(#arrow)" />
    <path d="M 250 217 L 220 217" stroke="#EF4444" stroke-width="2" fill="none" marker-end="url(#arrow)" stroke-dasharray="3,3" />
    
    <!-- Shared DB violations -->
    <path d="M 160 235 L 410 310" stroke="#F97316" stroke-width="2" fill="none" marker-end="url(#arrow)" stroke-dasharray="4,4" />
    <path d="M 310 235 L 410 310" stroke="#F97316" stroke-width="2" fill="none" marker-end="url(#arrow)" stroke-dasharray="4,4" />
  </g>

  <!-- Violation Labels -->
  <g id="labels">
    <!-- Cross-layer violation label -->
    <rect x="70" y="380" width="180" height="60" rx="4" fill="#FEE2E2" stroke="#EF4444" stroke-width="2" />
    <text font-family="Inter, system-ui, sans-serif" x="80" y="400" font-size="11" font-weight="600" fill="#B91C1C">Violation #1: Cross-Layer</text>
    <text font-family="Inter, system-ui, sans-serif" x="80" y="415" font-size="10" fill="#7F1D1D">UI directly accessing DB</text>
    <text font-family="Inter, system-ui, sans-serif" x="80" y="430" font-size="10" fill="#7F1D1D">bypassing Service layer</text>
    
    <!-- Circular dependency label -->
    <rect x="270" y="380" width="180" height="60" rx="4" fill="#FED7AA" stroke="#F97316" stroke-width="2" />
    <text font-family="Inter, system-ui, sans-serif" x="280" y="400" font-size="11" font-weight="600" fill="#C2410C">Violation #2: Circular</text>
    <text font-family="Inter, system-ui, sans-serif" x="280" y="415" font-size="10" fill="#7C2D12">CustomerService â†”</text>
    <text font-family="Inter, system-ui, sans-serif" x="280" y="430" font-size="10" fill="#7C2D12">OrderService dependency</text>
    
    <!-- Shared DB label -->
    <rect x="470" y="380" width="180" height="60" rx="4" fill="#FEF3C7" stroke="#F59E0B" stroke-width="2" />
    <text font-family="Inter, system-ui, sans-serif" x="480" y="400" font-size="11" font-weight="600" fill="#92400E">Violation #3: Shared DB</text>
    <text font-family="Inter, system-ui, sans-serif" x="480" y="415" font-size="10" fill="#78350F">Multiple services using</text>
    <text font-family="Inter, system-ui, sans-serif" x="480" y="430" font-size="10" fill="#78350F">same database directly</text>
  </g>

  <!-- Legend -->
  <g id="legend">
    <text font-family="Inter, system-ui, sans-serif" x="680" y="400" font-size="10" font-weight="600" fill="#374151">Legend:</text>
    <line x1="680" y1="415" x2="710" y2="415" stroke="#9CA3AF" stroke-width="1" />
    <text font-family="Inter, system-ui, sans-serif" x="715" y="418" font-size="9" fill="#6B7280">Valid</text>
    <line x1="680" y1="430" x2="710" y2="430" stroke="#EF4444" stroke-width="3" stroke-dasharray="5,5" />
    <text font-family="Inter, system-ui, sans-serif" x="715" y="433" font-size="9" fill="#6B7280">Violation</text>
  </g>
