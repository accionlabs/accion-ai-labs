<svg viewBox="0 0 900 650" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="450" y="25" text-anchor="middle" font-size="14" font-weight="600" fill="#111827">
    Agent-Based Ontology Extraction Flow
  </text>
  
  <!-- Input Sources -->
  <g id="inputs">
    <text x="450" y="55" text-anchor="middle" font-size="12" font-weight="500" fill="#6B7280">
      Input Artifacts
    </text>
    
    <!-- Code Repository (Primary) -->
    <rect x="350" y="70" width="200" height="70" rx="8" fill="#DBEAFE" stroke="#2563EB" stroke-width="3" />
    <text x="450" y="95" text-anchor="middle" font-size="11" font-weight="600" fill="#1E40AF">
      Code Repository
    </text>
    <text x="450" y="112" text-anchor="middle" font-size="9" fill="#2563EB">
      Source Files • Configs
    </text>
    <text x="450" y="127" text-anchor="middle" font-size="9" fill="#2563EB">
      Dependencies • Tests
    </text>
    
    <!-- Documentation -->
    <g id="docs">
      <rect x="80" y="80" width="100" height="50" rx="6" fill="#EDE9FE" stroke="#A78BFA" stroke-width="1.5" />
      <text x="130" y="100" text-anchor="middle" font-size="9" font-weight="500" fill="#5B21B6">
        Requirements
      </text>
      <text x="130" y="115" text-anchor="middle" font-size="8" fill="#7C3AED">
        PRDs • Stories
      </text>

      <rect x="190" y="80" width="100" height="50" rx="6" fill="#FCE7F3" stroke="#F9A8D4" stroke-width="1.5" />
      <text x="240" y="100" text-anchor="middle" font-size="9" font-weight="500" fill="#831843">
        Design Docs
      </text>
      <text x="240" y="115" text-anchor="middle" font-size="8" fill="#BE185D">
        Mockups • UI
      </text>

      <rect x="610" y="80" width="100" height="50" rx="6" fill="#D1FAE5" stroke="#34D399" stroke-width="1.5" />
      <text x="660" y="100" text-anchor="middle" font-size="9" font-weight="500" fill="#14532D">
        Architecture
      </text>
      <text x="660" y="115" text-anchor="middle" font-size="8" fill="#15803D">
        System • APIs
      </text>
      
      <rect x="720" y="80" width="100" height="50" rx="6" fill="#FEF3C7" stroke="#FCD34D" stroke-width="1.5" />
      <text x="770" y="100" text-anchor="middle" font-size="9" font-weight="500" fill="#78350F">
        User Guides
      </text>
      <text x="770" y="115" text-anchor="middle" font-size="8" fill="#92400E">
        Manuals • Help
      </text>
    </g>
  </g>

  <!-- Step 1: Code Agent Processing -->
  <g id="step1">
    <rect x="30" y="160" width="100" height="25" rx="12" fill="#1E40AF" />
    <text x="80" y="177" text-anchor="middle" font-size="10" font-weight="600" fill="white">
      STEP 1
    </text>
    
    <!-- Arrow from Code to Code Agent -->
    <path d="M 450 140 L 450 200" stroke="#2563EB" stroke-width="3" fill="none" marker-end="url(#arrowhead-blue)" />
    
    <!-- Code Agent -->
    <rect x="380" y="200" width="140" height="90" rx="8" fill="#BFDBFE" stroke="#2563EB" stroke-width="3" />
    <circle cx="450" cy="230" r="18" fill="#2563EB" />
    <text x="450" y="235" text-anchor="middle" font-size="11" font-weight="bold" fill="white">
      C
    </text>
    <text x="450" y="260" text-anchor="middle" font-size="10" font-weight="600" fill="#1E3A8A">
      Code Agent
    </text>
    <text x="450" y="275" text-anchor="middle" font-size="9" fill="#1E40AF">
      Analyzes source code
    </text>
  </g>

  <!-- Code Graph (Ground Truth) -->
  <g id="code-graph">
    <path d="M 450 290 L 450 340" stroke="#2563EB" stroke-width="3" fill="none" marker-end="url(#arrowhead-blue)" />
    
    <rect x="350" y="340" width="200" height="80" rx="8" fill="#DBEAFE" stroke="#3B82F6" stroke-width="3" />
    <text x="450" y="365" text-anchor="middle" font-size="11" font-weight="600" fill="#1E3A8A">
      Code Graph (Ground Truth)
    </text>
    <text x="450" y="382" text-anchor="middle" font-size="9" fill="#1E40AF">
      17 nodes • 15 edges
    </text>
    <rect x="395" y="390" width="110" height="22" rx="11" fill="#2563EB" />
    <text x="450" y="405" text-anchor="middle" font-size="10" font-weight="bold" fill="white">
      BASE REFERENCE
    </text>
  </g>

  <!-- Step 2: Other Agents -->
  <g id="step2">
    <rect x="30" y="440" width="100" height="25" rx="12" fill="#7C3AED" />
    <text x="80" y="457" text-anchor="middle" font-size="10" font-weight="600" fill="white">
      STEP 2
    </text>
    
    <text x="450" y="457" text-anchor="middle" font-size="11" font-weight="500" fill="#6B7280">
      Parallel Processing (Using Code Graph as Reference)
    </text>
    
    <!-- Arrows from Code Graph to other agents -->
    <path d="M 380 420 L 200 480" stroke="#2563EB" stroke-width="2.5" fill="none" marker-end="url(#arrowhead-blue)" stroke-dasharray="5,3" />
    <text x="290" y="450" text-anchor="middle" font-size="8" fill="#2563EB" font-weight="500">Code Graph</text>
    
    <path d="M 450 420 L 450 480" stroke="#2563EB" stroke-width="2.5" fill="none" marker-end="url(#arrowhead-blue)" stroke-dasharray="5,3" />
    <text x="470" y="450" font-size="8" fill="#2563EB" font-weight="500">Code Graph</text>
    
    <path d="M 520 420 L 700 480" stroke="#2563EB" stroke-width="2.5" fill="none" marker-end="url(#arrowhead-blue)" stroke-dasharray="5,3" />
    <text x="610" y="450" text-anchor="middle" font-size="8" fill="#2563EB" font-weight="500">Code Graph</text>
    
    <!-- Arrows from Docs -->
    <path d="M 130 130 L 160 480" stroke="#A78BFA" stroke-width="1.5" fill="none" marker-end="url(#arrowhead-purple)" />
    <path d="M 240 130 L 450 480" stroke="#F9A8D4" stroke-width="1.5" fill="none" marker-end="url(#arrowhead-pink)" />
    <path d="M 660 130 L 680 480" stroke="#34D399" stroke-width="1.5" fill="none" marker-end="url(#arrowhead-green)" />
    <path d="M 770 130 L 200 480" stroke="#FCD34D" stroke-width="1.5" fill="none" marker-end="url(#arrowhead-yellow)" />
    
    <!-- Functional Agent -->
    <rect x="100" y="480" width="140" height="80" rx="8" fill="#DDD6FE" stroke="#7C3AED" stroke-width="2" />
    <circle cx="170" cy="510" r="18" fill="#7C3AED" />
    <text x="170" y="515" text-anchor="middle" font-size="11" font-weight="bold" fill="white">
      F
    </text>
    <text x="170" y="538" text-anchor="middle" font-size="10" font-weight="500" fill="#4C1D95">
      Functional Agent
    </text>
    <text x="170" y="552" text-anchor="middle" font-size="8" fill="#5B21B6">
      Maps requirements to code
    </text>

    <!-- Design Agent -->
    <rect x="380" y="480" width="140" height="80" rx="8" fill="#FBCFE8" stroke="#EC4899" stroke-width="2" />
    <circle cx="450" cy="510" r="18" fill="#EC4899" />
    <text x="450" y="515" text-anchor="middle" font-size="11" font-weight="bold" fill="white">
      D
    </text>
    <text x="450" y="538" text-anchor="middle" font-size="10" font-weight="500" fill="#831843">
      Design Agent
    </text>
    <text x="450" y="552" text-anchor="middle" font-size="8" fill="#BE185D">
      Maps UI to code components
    </text>

    <!-- Architecture Agent -->
    <rect x="630" y="480" width="140" height="80" rx="8" fill="#A7F3D0" stroke="#10B981" stroke-width="2" />
    <circle cx="700" cy="510" r="18" fill="#10B981" />
    <text x="700" y="515" text-anchor="middle" font-size="11" font-weight="bold" fill="white">
      A
    </text>
    <text x="700" y="538" text-anchor="middle" font-size="10" font-weight="500" fill="#14532D">
      Architecture Agent
    </text>
    <text x="700" y="552" text-anchor="middle" font-size="8" fill="#15803D">
      Maps layers to code
    </text>
  </g>

  <!-- Output Graphs -->
  <g id="outputs">
    <text x="450" y="585" text-anchor="middle" font-size="11" font-weight="500" fill="#6B7280">
      Generated Ontology Graphs
    </text>
    
    <!-- Individual graphs -->
    <rect x="100" y="595" width="140" height="40" rx="6" fill="#EDE9FE" stroke="#8B5CF6" stroke-width="2" />
    <text x="170" y="615" text-anchor="middle" font-size="9" font-weight="500" fill="#4C1D95">
      Functional: 13 nodes
    </text>
    <text x="170" y="628" text-anchor="middle" font-size="8" fill="#7C3AED">5 gaps identified</text>
    
    <rect x="380" y="595" width="140" height="40" rx="6" fill="#FCE7F3" stroke="#EC4899" stroke-width="2" />
    <text x="450" y="615" text-anchor="middle" font-size="9" font-weight="500" fill="#831843">
      Design: 16 nodes
    </text>
    <text x="450" y="628" text-anchor="middle" font-size="8" fill="#BE185D">3 inconsistencies</text>
    
    <rect x="630" y="595" width="140" height="40" rx="6" fill="#D1FAE5" stroke="#10B981" stroke-width="2" />
    <text x="700" y="615" text-anchor="middle" font-size="9" font-weight="500" fill="#14532D">
      Architecture: 11 nodes
    </text>
    <text x="700" y="628" text-anchor="middle" font-size="8" fill="#15803D">3 violations</text>
    
    <!-- Cross-ontology connections -->
    <path d="M 240 615 L 380 615" stroke="#F97316" stroke-width="2" fill="none" stroke-dasharray="4,2" />
    <path d="M 520 615 L 630 615" stroke="#F97316" stroke-width="2" fill="none" stroke-dasharray="4,2" />
    <text x="310" y="610" text-anchor="middle" font-size="8" fill="#EA580C">mappings</text>
    <text x="575" y="610" text-anchor="middle" font-size="8" fill="#EA580C">mappings</text>
  </g>

  <!-- Key Points -->
  <g id="key-points">
    <rect x="790" y="340" width="100" height="80" rx="6" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1.5" />
    <text x="840" y="358" text-anchor="middle" font-size="9" font-weight="600" fill="#92400E">
      Key Points
    </text>
    <text x="795" y="375" font-size="8" fill="#78350F">• Code is parsed</text>
    <text x="795" y="388" font-size="8" fill="#78350F">  first (Step 1)</text>
    <text x="795" y="401" font-size="8" fill="#78350F">• Other agents</text>
    <text x="795" y="414" font-size="8" fill="#78350F">  use code graph</text>
  </g>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#9CA3AF" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2563EB" />
    </marker>
    <marker id="arrowhead-purple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#A78BFA" />
    </marker>
    <marker id="arrowhead-pink" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#F9A8D4" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#34D399" />
    </marker>
    <marker id="arrowhead-yellow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#FCD34D" />
    </marker>
  </defs>
</svg>